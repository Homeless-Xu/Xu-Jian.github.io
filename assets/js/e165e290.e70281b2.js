"use strict";(self.webpackChunkblog_never_del=self.webpackChunkblog_never_del||[]).push([[961],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(t),m=o,v=u["".concat(l,".").concat(m)]||u[m]||d[m]||a;return t?r.createElement(v,s(s({ref:n},p),{},{components:t})):r.createElement(v,s({ref:n},p))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=u;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var c=2;c<a;c++)s[c]=t[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},6136:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var r=t(7462),o=(t(7294),t(3905));const a={sidebar_position:1717,title:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c Choose"},s="VPN \u2736 Choose",i={unversionedId:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c Design",id:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c Design",title:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c Choose",description:"\ud83d\udd35 Final result",source:"@site/docs/\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c Design.md",sourceDirName:".",slug:"/\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c Design",permalink:"/\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c Design",draft:!1,tags:[],version:"current",sidebarPosition:1717,frontMatter:{sidebar_position:1717,title:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c Choose"},sidebar:"defaultSidebar",previous:{title:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-3\ufe0f\u20e3 DNS \u279c AdGuard",permalink:"/\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-3\ufe0f\u20e3 DNS \u279c AdGuard"},next:{title:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c\u279c Wireguard",permalink:"/\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c\u279c Wireguard"}},l={},c=[],p={toc:c};function d(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"vpn--choose"},"VPN \u2736 Choose"),(0,o.kt)("p",null,"\ud83d\udd35 Final result"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1= vps: choose wireguard\n2+ vps: choose netmaker\n\n    wireguard is not  smart. but only need one vps host. \n    netmaker  is much smart. but must need two vps host.\n\n        \ud83d\udd25 netmaker server itself can not be vpn node. so need another vps.\n        \ud83d\udd25 netmaker server itself can not be vpn node. so need another vps.\n        \ud83d\udd25 netmaker server itself can not be vpn node. so need another vps.\n")),(0,o.kt)("p",null,"\ud83d\udd35 Why Wireguard & netmaker  "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Wireguard best. fastest.\nnetmaker make deploy wireguard much easy. \n")),(0,o.kt)("p",null,"\ud83d\udd35 netmaker Desc "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\u203c\ufe0f Offical mamual  https://netmaker.readthedocs.io/en/master/quick-start.html  \u203c\ufe0f\n\u203c\ufe0f Offical mamual  https://netmaker.readthedocs.io/en/master/quick-start.html  \u203c\ufe0f\n\u203c\ufe0f Offical mamual  https://netmaker.readthedocs.io/en/master/quick-start.html  \u203c\ufe0f\n\n\nCS mode. \nserver:  lots docker \nclient:  one docker/one cmd\n")),(0,o.kt)("p",null,"\ud83d\udd35 Netmaker Srv ( Host vs Docker )   \u2705"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\u203c\ufe0f use Docker is easy. but host itself can not join vpn network \n\u203c\ufe0f use Docker is easy. but host itself can not join vpn network \n\u203c\ufe0f use Docker is easy. but host itself can not join vpn network \n    https://docs.netmaker.org/troubleshoot.html?highlight=host\n\n\nuse docker compose build netmaker server node is very easy.\n    but by default. server host itself in not joined to vpn network.\n    and you can not install netclient to server host node \n        - you can not install both netmaker & netclient at same host.\n            - host`s docker can     visit vpn network.\n            - host itself   can not visit vpn network. \n        \nso if you have two vps.  \n    vps_srv install netmaker. \n    vps_cli install netclient. \u279c use this vps to visit your homelab vlan.\n\n\nif you only have one vps. \n    you need use reverse proxy tool. like traefik/nginx/nginx proxy manager.\n        to help your vps visit vlan inside homelab. \n            netmaker have build in traefik already.  we can use this too.\n\n    edit traefik docker.  \n        add static router to traefik forward homelab vlan to netmaker\n            make traefik docker can visit vpn & homelab lan.\n                then set rever proxy on traefik.\n")),(0,o.kt)("p",null,"\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35 Netmaker Basic "),(0,o.kt)("p",null,"\ud83d\udd35 Demo & Needs"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"we need iphone visit all vlan under homelab. via internet. \n\n(ingress Gateway)   internet:     VPN.Srv.VPS      10.214.214.254\n(egress  Gateway)   homelab:      VPN.CLI.LAB      10.214.214.1    \u279c  a lot vlan\n(client         )   iPhone:       VPN.CLI.iphone   10.214.214.x  \n")),(0,o.kt)("p",null,"\ud83d\udd35 Build VPN Network "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83d\udd36 win / mac /linux \n\n    add srv.vps.    \u279c  config netmaker setting.\n    add cli.lab     \u279c  connect homelab & vps   \n        now cli.lab can ping srv.vps use 10.214.214.0/24\n        but srv.vps not able ping vlan under cli.lab.\n\n\n \ud83d\udd36 Iphone/andriod\n\n    phone is not supprted yet. \n    so need one more step. use one node as relay.\n\n    config srv.vps as ingress gataway.\n    add cli.iphone under ingress gateway.  \u279c so iphone can ping 10.214.214.0/24 \n")),(0,o.kt)("p",null,"\ud83d\udd35 Config Egress "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"egress gateway allow you visit vlan under homelab.\nconfig cli.lab as egress gateway.\n    allow 10.214.214.0/24  to visit vlan under homelab.\n        egress gateway range:  172.16.1.0/24    \u279c one vlan under homelab.\n        interface name: ens160                  \u279c which nic netmaker forward 172.16.1.0 traffic to \n            login to cli.lab server. get your nic name.\n\n    egress will add  postup & postdown / firewall rules to cli.lab node. like. \n        iptables -A FORWARD -i nm-demo -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n        iptables -D FORWARD -i nm-demo -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\n\n    egress will add 172.16.1.0/24   to all  vpn nodes. too \n    so all vpn node can ping 172.16.1.0/24 \n\n\n\ud83d\udd36 srv node test.\n\n    we use netmaker docker in vps. \n    so need enter docker to test. -.- \n    it works. \n\n\n\ud83d\udd36 cli.iphone test \n\n    \u203c\ufe0f if change some netmaker config. iphone need delete old vpn config. rescan the qr code \u203c\ufe0f \n    \u203c\ufe0f if change some netmaker config. iphone need delete old vpn config. rescan the qr code \u203c\ufe0f \n    \u203c\ufe0f if change some netmaker config. iphone need delete old vpn config. rescan the qr code \u203c\ufe0f\n")))}d.isMDXComponent=!0}}]);