"use strict";(self.webpackChunkblog_never_del=self.webpackChunkblog_never_del||[]).push([[816],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var d=r.createContext({}),u=function(e){var t=r.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(d.Provider,{value:t},e.children)},i={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,s=e.mdxType,o=e.originalType,d=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),c=u(n),m=s,v=c["".concat(d,".").concat(m)]||c[m]||i[m]||o;return n?r.createElement(v,l(l({ref:t},p),{},{components:n})):r.createElement(v,l({ref:t},p))}));function m(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=n.length,l=new Array(o);l[0]=c;var a={};for(var d in t)hasOwnProperty.call(t,d)&&(a[d]=t[d]);a.originalType=e,a.mdxType="string"==typeof e?e:s,l[1]=a;for(var u=2;u<o;u++)l[u]=n[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5836:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>i,frontMatter:()=>o,metadata:()=>a,toc:()=>u});var r=n(7462),s=(n(7294),n(3905));const o={sidebar_position:1703,title:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-3\ufe0f\u20e3 DNS \u279c AdGuard"},l="DNS \u2736 AdGuard",a={unversionedId:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-3\ufe0f\u20e3 DNS \u279c AdGuard",id:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-3\ufe0f\u20e3 DNS \u279c AdGuard",title:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-3\ufe0f\u20e3 DNS \u279c AdGuard",description:"\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35 NET DNS:  AdGuard Home",source:"@site/docs/\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-3\ufe0f\u20e3 DNS \u279c AdGuard.md",sourceDirName:".",slug:"/\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-3\ufe0f\u20e3 DNS \u279c AdGuard",permalink:"/\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-3\ufe0f\u20e3 DNS \u279c AdGuard",draft:!1,tags:[],version:"current",sidebarPosition:1703,frontMatter:{sidebar_position:1703,title:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-3\ufe0f\u20e3 DNS \u279c AdGuard"},sidebar:"defaultSidebar",previous:{title:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-0\ufe0f\u20e3 SSL \u279c Apply & Use",permalink:"/\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-0\ufe0f\u20e3 SSL \u279c Apply"},next:{title:"\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c Choose",permalink:"/\ud83c\udfaa-7\ufe0f\u20e3 NET \ud83c\udf10-7\ufe0f\u20e3 VPN \u279c Design"}},d={},u=[],p={toc:u};function i(e){let{components:t,...n}=e;return(0,s.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"dns--adguard"},"DNS \u2736 AdGuard"),(0,s.kt)("p",null,"\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35 NET DNS:  AdGuard Home "),(0,s.kt)("p",null,"\ud83d\udd35 Desc "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"adguard  = pihole(remove ad) + smartnds(choose fatest dns)\n\nhttps://icloudnative.io/posts/adguard-home/\n")),(0,s.kt)("p",null,"\ud83d\udd35 Adgurad vs pihole "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"https://github.com/AdguardTeam/AdGuardHome\n")),(0,s.kt)("p",null,"\ud83d\udd35 Docker "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"https://hub.docker.com/r/adguard/adguardhome\n\n\ud83d\udd36 use host mode if possible.\n\n\ndocker run --name adguardhome\\\n    --restart unless-stopped\\\n    -v /my/own/workdir:/opt/adguardhome/work\\\n    -v /my/own/confdir:/opt/adguardhome/conf\\\n    -d adguard/adguardhome\n")),(0,s.kt)("p",null,"\ud83d\udd35 add  upstream dns server."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"https://p3terx.com/archives/use-adguard-home-to-build-dns-to-prevent-pollution-and-remove-ads-2.html\n")),(0,s.kt)("p",null,"\ud83d\udd35 dns filter."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"anti-AD      https://anti-ad.net/easylist.txt\n\nhalflife      https://cdn.jsdelivr.net/gh/o0HalfLife0o/list@master/ad.txt\n\n\nhttps://anti-ad.net/easylist.txt\n")),(0,s.kt)("p",null,"\ud83d\udd36 free dns "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"Google  8.8.8.8 8.8.4.4\nCloudflare  1.1.1.1 1.0.0.1\nQuad9   9.9.9.9 149.112.112.112\nOpenDNS Home    208.67.222.222  208.67.220.220\n\n\n\nserver 8.8.8.8\nserver 8.8.4.4\nserver 1.1.1.1\nserver 1.0.0.1\nserver 9.9.9.9\nserver 149.112.112.112\nserver 208.67.222.222\nserver 208.67.220.220\n\nserver-tcp 8.8.8.8\nserver-tcp 8.8.4.4\nserver-tcp 1.1.1.1\nserver-tcp 1.0.0.1\nserver-tcp 9.9.9.9\nserver-tcp 149.112.112.112\nserver-tcp 208.67.222.222\nserver-tcp 208.67.220.220\n\nserver-tls 8.8.8.8\nserver-tls 8.8.4.4\nserver-tls 1.1.1.1\nserver-tls 1.0.0.1\nserver-tls 9.9.9.9\nserver-tls 149.112.112.112\nserver-tls 208.67.222.222\nserver-tls 208.67.220.220\n")),(0,s.kt)("p",null,"\ud83d\udd35 router dhcp set"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"main dns:  172.16.8.2\nsec        172.16.8.4\n3          1.1.1.1\n4.         8.8.8.8\n")),(0,s.kt)("p",null,"\ud83d\udd35 result test ."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"dig can show how long dns request takes.\n\ncompare. yourself\n\ndig @1.1.1.1 xclient.info\ndig @172.16.8.2 xclient.info\n")),(0,s.kt)("p",null," \ud83d\udd36 server test "),(0,s.kt)("p",null,"  nslookup -q=a 0214.icu 172.16.8.4 \u279c use 172.16.8.4 as dns server\nnslookup -q=a 0214.icu 8.8.8.8    \u279c use 8.8.8.8    as dns server "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"U.2204 ~ nslookup -q=a 0214.icu 172.16.8.4\nServer:     172.16.8.4\nAddress:    172.16.8.4#53\n\nNon-authoritative answer:\nName:   0214.icu\nAddress: 172.93.42.232\n")),(0,s.kt)("p",null," \ud83d\udd35 Ubuntu buildin systemd-resolved Setup \u2705"),(0,s.kt)("p",null,"\ud83d\udd36 Check 53 status "),(0,s.kt)("p",null,"  sudo lsof -i:53\nCOMMAND   PID            USER   FD   TYPE DEVICE SIZE/OFF NODE NAME\nsystemd-r 858 systemd-resolve   13u  IPv4  22529      0t0  UDP localhost:domain\nsystemd-r 858 systemd-resolve   14u  IPv4  22530      0t0  TCP localhost:domain (LISTEN)"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"  53 is used by default in ubunbtu.\n  if you need use smartdns/ this need use 53 too.\n  so have to free the 53 first.\n")),(0,s.kt)("p",null,"\ud83d\udd36 Change resolved.conf"),(0,s.kt)("p",null,"   vi /etc/systemd/resolved.conf\nedit line #DNSStubListener=yes\nto be DNSStubListener=no"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"this will free the 53 port.\nthis is system buildin function .\n\u203c\ufe0f do not disable it. just let it not use 53.\u203c\ufe0f\n\u203c\ufe0f do not disable it. just let it not use 53.\u203c\ufe0f\n\u203c\ufe0f do not disable it. just let it not use 53.\u203c\ufe0f\notherwise network will go wrong.\n \n")),(0,s.kt)("p",null," \ud83d\udd35 Desc "),(0,s.kt)("p",null,"  smartdns:  get the fastest dns for you .\npi-hole :  remove ads."),(0,s.kt)("p",null,"  smartdns IP :  172.16.8.4\npi-hole  IP :   172.16.8.2"),(0,s.kt)("p",null,"  pc       dns server:  172.16.8.2\npi-hole  dns server:  172.16.8.4\nsmartdns dns server:  1.1.1.1 ... "),(0,s.kt)("p",null,"\ud83d\udd35 Demo "),(0,s.kt)("p",null,"  pc (pihole ip )"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},">>  pihole (smartdns ip )\n  >> internet\n")))}i.isMDXComponent=!0}}]);