"use strict";(self.webpackChunkblog_never_del=self.webpackChunkblog_never_del||[]).push([[298],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=n.createContext({}),p=function(e){var t=n.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=p(r),m=a,k=h["".concat(o,".").concat(m)]||h[m]||c[m]||l;return r?n.createElement(k,i(i({ref:t},u),{},{components:r})):n.createElement(k,i({ref:t},u))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,i=new Array(l);i[0]=h;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var p=2;p<l;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},1267:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>s,toc:()=>p});var n=r(7462),a=(r(7294),r(3905));const l={sidebar_position:4930,title:"\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa-\ud83d\udd10\ud83d\udd10\ud83d\udd10 SSO \u279c\u279c Authelia USE"},i="SSO Authelia USE",s={unversionedId:"\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa-\ud83d\udd10\ud83d\udd10\ud83d\udd10 SSO \u279c\u279c Authelia Use",id:"\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa-\ud83d\udd10\ud83d\udd10\ud83d\udd10 SSO \u279c\u279c Authelia Use",title:"\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa-\ud83d\udd10\ud83d\udd10\ud83d\udd10 SSO \u279c\u279c Authelia USE",description:"\ud83d\udd35 goal",source:"@site/docs/\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa-\ud83d\udd10\ud83d\udd10\ud83d\udd10 SSO \u279c\u279c Authelia Use.md",sourceDirName:".",slug:"/\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa-\ud83d\udd10\ud83d\udd10\ud83d\udd10 SSO \u279c\u279c Authelia Use",permalink:"/\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa-\ud83d\udd10\ud83d\udd10\ud83d\udd10 SSO \u279c\u279c Authelia Use",draft:!1,tags:[],version:"current",sidebarPosition:4930,frontMatter:{sidebar_position:4930,title:"\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa-\ud83d\udd10\ud83d\udd10\ud83d\udd10 SSO \u279c\u279c Authelia USE"},sidebar:"defaultSidebar",previous:{title:"\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa-\ud83d\udd10\ud83d\udd10\ud83d\udd10 SSO \u279c Authelia install",permalink:"/\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa\ud83c\udfaa-\ud83d\udd10\ud83d\udd10\ud83d\udd10 SSO \u279c Authelia"}},o={},p=[],u={toc:p};function c(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"sso-authelia-use"},"SSO Authelia USE"),(0,a.kt)("p",null,"\ud83d\udd35 goal"),(0,a.kt)("p",null,"  authelia + openldap \u2705"),(0,a.kt)("p",null,"  authelia + treafik "),(0,a.kt)("p",null,"\ud83d\udd35 "),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"})),(0,a.kt)("p",null,"0214.icu >>  vps traefik (ssl)\nvpn: openldap + authelia "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"if need traefik  combind authelia.. need in same docker network.????\nwe can use public port..\n")),(0,a.kt)("p",null,"or add a local traefik ."),(0,a.kt)("p",null,"0214.icu >>  vps traefik (ssl)   <===>  VPN. traefik local.\nlan:  traefik +  openldap + authelia "),(0,a.kt)("p",null,". use swarn.  or...k8s.  or ..."),(0,a.kt)("p",null,"\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35"),(0,a.kt)("p",null,"\ud83d\udd35 How\nuse traefik middle ware."),(0,a.kt)("p",null,"\ud83d\udd35 traefik + authelia "),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/authelia/authelia/blob/master/examples/compose/lite/docker-compose.yml"},"https://github.com/authelia/authelia/blob/master/examples/compose/lite/docker-compose.yml")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://wbsu2003.4everland.app/2022/03/09/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1Authelia%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89/"},"https://wbsu2003.4everland.app/2022/03/09/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1Authelia%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89/")),(0,a.kt)("p",null,"Outline\u4f7f\u7528Authelia\u5b9e\u73b0\u672c\u5730\u8ba4\u8bc1"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://wbsu2003.4everland.app/2022/03/11/Outline%E4%BD%BF%E7%94%A8Authelia%E5%AE%9E%E7%8E%B0%E6%9C%AC%E5%9C%B0%E8%AE%A4%E8%AF%81/"},"https://wbsu2003.4everland.app/2022/03/11/Outline%E4%BD%BF%E7%94%A8Authelia%E5%AE%9E%E7%8E%B0%E6%9C%AC%E5%9C%B0%E8%AE%A4%E8%AF%81/")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=yHICIVhm_Lo&t=621s&ab_channel=Sagit"},"https://www.youtube.com/watch?v=yHICIVhm_Lo&t=621s&ab_channel=Sagit")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"services:\n  authelia:\n    image: authelia/authelia\n    container_name: authelia\n    volumes:\n      - ./authelia:/config\n    networks:\n      - net\n    labels:\n      - 'traefik.enable=true'\n      - 'traefik.http.routers.authelia.rule=Host(`authelia.example.com`)'\n      - 'traefik.http.routers.authelia.entrypoints=https'\n      - 'traefik.http.routers.authelia.tls=true'\n      - 'traefik.http.routers.authelia.tls.certresolver=letsencrypt'\n      - 'traefik.http.middlewares.authelia.forwardauth.address=http://authelia:9091/api/verify?rd=https://authelia.example.com'  # yamllint disable-line rule:line-length\n      - 'traefik.http.middlewares.authelia.forwardauth.trustForwardHeader=true'\n      - 'traefik.http.middlewares.authelia.forwardauth.authResponseHeaders=Remote-User,Remote-Groups,Remote-Name,Remote-Email'  # yamllint disable-line rule:line-length\n    expose:\n      - 9091\n    restart: unless-stopped\n    healthcheck:\n      disable: true\n    environment:\n      - TZ=Australia/Melbourne\n\n  redis:\n    image: redis:alpine\n    container_name: redis\n    volumes:\n      - ./redis:/data\n    networks:\n      - net\n    expose:\n      - 6379\n    restart: unless-stopped\n    environment:\n      - TZ=Australia/Melbourne\n\n  traefik:\n    image: traefik:v2.8\n    container_name: traefik\n    volumes:\n      - ./traefik:/etc/traefik\n      - /var/run/docker.sock:/var/run/docker.sock\n    networks:\n      - net\n    labels:\n      - 'traefik.enable=true'\n      - 'traefik.http.routers.api.rule=Host(`traefik.example.com`)'\n      - 'traefik.http.routers.api.entrypoints=https'\n      - 'traefik.http.routers.api.service=api@internal'\n      - 'traefik.http.routers.api.tls=true'\n      - 'traefik.http.routers.api.tls.certresolver=letsencrypt'\n      - 'traefik.http.routers.api.middlewares=authelia@docker'\n    ports:\n      - 80:80\n      - 443:443\n    command:\n      - '--api'\n      - '--providers.docker=true'\n      - '--providers.docker.exposedByDefault=false'\n      - '--entrypoints.http=true'\n      - '--entrypoints.http.address=:80'\n      - '--entrypoints.http.http.redirections.entrypoint.to=https'\n      - '--entrypoints.http.http.redirections.entrypoint.scheme=https'\n      - '--entrypoints.https=true'\n      - '--entrypoints.https.address=:443'\n      - '--certificatesResolvers.letsencrypt.acme.email=your-email@your-domain.com'\n      - '--certificatesResolvers.letsencrypt.acme.storage=/etc/traefik/acme.json'\n      - '--certificatesResolvers.letsencrypt.acme.httpChallenge.entryPoint=http'\n      - '--log=true'\n      - '--log.level=DEBUG'\n\n  secure:\n    image: traefik/whoami\n    container_name: secure\n    networks:\n      - net\n    labels:\n      - 'traefik.enable=true'\n      - 'traefik.http.routers.secure.rule=Host(`secure.example.com`)'\n      - 'traefik.http.routers.secure.entrypoints=https'\n      - 'traefik.http.routers.secure.tls=true'\n      - 'traefik.http.routers.secure.tls.certresolver=letsencrypt'\n      - 'traefik.http.routers.secure.middlewares=authelia@docker'\n    expose:\n      - 80\n    restart: unless-stopped\n\n  public:\n    image: traefik/whoami\n    container_name: public\n    networks:\n      - net\n    labels:\n      - 'traefik.enable=true'\n      - 'traefik.http.routers.public.rule=Host(`public.example.com`)'\n      - 'traefik.http.routers.public.entrypoints=https'\n      - 'traefik.http.routers.public.tls=true'\n      - 'traefik.http.routers.public.tls.certresolver=letsencrypt'\n      - 'traefik.http.routers.public.middlewares=authelia@docker'\n    expose:\n      - 80\n    restart: unless-stop\n")),(0,a.kt)("p",null,"\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35 config swarn first'"),(0,a.kt)("p",null,"vps +  local doker. "),(0,a.kt)("p",null,"\ud83d\udd35 traefik + authelia "),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/authelia/authelia/blob/master/examples/compose/lite/docker-compose.yml"},"https://github.com/authelia/authelia/blob/master/examples/compose/lite/docker-compose.yml")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://wbsu2003.4everland.app/2022/03/09/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1Authelia%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89/"},"https://wbsu2003.4everland.app/2022/03/09/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1Authelia%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89/")),(0,a.kt)("p",null,"\u6709\u4e86 Authelia\uff0c\u518d\u914d\u5408 Fail2ban \u9632\u6b62\u66b4\u529b\u7834\u89e3\uff0c\u516c\u7f51\u8bbf\u95ee\u7684\u5b89\u5168\u6027\u95ee\u9898\u4f1a\u5f97\u5230\u5f88\u5927\u7684\u4fdd\u969c\u3002"),(0,a.kt)("p",null,"\u867d\u7136\u5b98\u65b9\u5f3a\u8c03 OpenID Connect \u4ecd\u5904\u4e8e\u9884\u89c8\u9636\u6bb5\uff0c\u4f46\u5b9e\u9645\u4e0aAuthelia \u5df2\u7ecf\u652f\u6301 OIDC \u8ba4\u8bc1\uff0c\u4e0d\u8fc7\u9650\u4e8e\u7bc7\u5e45\uff0c\u8fd8\u662f\u7559\u5230\u4e0b\u56de\u5427\u3002"),(0,a.kt)("p",null,"\u4e0b\u671f\u9884\u544a\ud83d\udc49\u300eOutline\u4f7f\u7528Authelia\u5b9e\u73b0\u672c\u5730\u8ba4\u8bc1\u300f\uff0c\u6587\u7ae0\u5c06\u8ba8\u8bba\u5982\u4f55\u5b9e\u73b0 Outline \u901a\u8fc7 Authelia \u7684 OIDC \u5b8c\u6210\u672c\u5730\u8ba4\u8bc1\uff0c\u800c\u4e0d\u518d\u9700\u8981\u501f\u52a9\u57fa\u4e8e\u516c\u7f51\u7684\u7b2c\u4e09\u65b9\u8ba4\u8bc1"),(0,a.kt)("p",null,"Outline\u4f7f\u7528Authelia\u5b9e\u73b0\u672c\u5730\u8ba4\u8bc1"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://wbsu2003.4everland.app/2022/03/11/Outline%E4%BD%BF%E7%94%A8Authelia%E5%AE%9E%E7%8E%B0%E6%9C%AC%E5%9C%B0%E8%AE%A4%E8%AF%81/"},"https://wbsu2003.4everland.app/2022/03/11/Outline%E4%BD%BF%E7%94%A8Authelia%E5%AE%9E%E7%8E%B0%E6%9C%AC%E5%9C%B0%E8%AE%A4%E8%AF%81/")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=yHICIVhm_Lo&t=621s&ab_channel=Sagit"},"https://www.youtube.com/watch?v=yHICIVhm_Lo&t=621s&ab_channel=Sagit")))}c.isMDXComponent=!0}}]);