"use strict";(self.webpackChunkblog_never_del=self.webpackChunkblog_never_del||[]).push([[308],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>m});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},c=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(t),m=o,k=d["".concat(s,".").concat(m)]||d[m]||p[m]||i;return t?r.createElement(k,a(a({ref:n},c),{},{components:t})):r.createElement(k,a({ref:n},c))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var u=2;u<i;u++)a[u]=t[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},856:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var r=t(7462),o=(t(7294),t(3905));const i={sidebar_position:2930,title:"\ud83c\udfaa\ud83c\udfaa\ud83d\udc2c\u2638\ufe0f Cluster \u279c MiniKube"},a="Minikube Build",l={unversionedId:"\ud83c\udfaa\ud83c\udfaa \ud83d\udc2c\u2638\ufe0f Cluster \u279c MiniKube",id:"\ud83c\udfaa\ud83c\udfaa \ud83d\udc2c\u2638\ufe0f Cluster \u279c MiniKube",title:"\ud83c\udfaa\ud83c\udfaa\ud83d\udc2c\u2638\ufe0f Cluster \u279c MiniKube",description:"\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35",source:"@site/docs/\ud83c\udfaa\ud83c\udfaa \ud83d\udc2c\u2638\ufe0f Cluster \u279c MiniKube.md",sourceDirName:".",slug:"/\ud83c\udfaa\ud83c\udfaa \ud83d\udc2c\u2638\ufe0f Cluster \u279c MiniKube",permalink:"/\ud83c\udfaa\ud83c\udfaa \ud83d\udc2c\u2638\ufe0f Cluster \u279c MiniKube",draft:!1,tags:[],version:"current",sidebarPosition:2930,frontMatter:{sidebar_position:2930,title:"\ud83c\udfaa\ud83c\udfaa\ud83d\udc2c\u2638\ufe0f Cluster \u279c MiniKube"},sidebar:"defaultSidebar",previous:{title:"\ud83c\udfaa\ud83c\udfaa\ud83d\udc2c Docker \u279c\u279c\u279c Swarm",permalink:"/\ud83c\udfaa\ud83c\udfaa \ud83d\udc2c Docker \u279c\u279c\u279c Swarm"},next:{title:"\ud83c\udfaa\ud83c\udfaa\ud83d\udc2c\u2638\ufe0f Cluster \u279c\u279c K3s",permalink:"/\ud83c\udfaa\ud83c\udfaa \ud83d\udc2c\u2638\ufe0f Cluster \u279c\u279c K3s"}},s={},u=[],c={toc:u};function p(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"minikube-build"},"Minikube Build"),(0,o.kt)("p",null,"\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\n\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35 minikube  - basic\n\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35"),(0,o.kt)("p",null,"\ud83d\udd35 Minikube Desc "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"minikube can make a k8s cluster at local machine very quick.\nit is good for test! \nwhen we learn k8s we need a test enviroment which can rebuild easy.\n\nwe have two option\n    minikube + docker  \u279c ...      \u279c  easy\n    minikube + Podman  \u279c better   \u279c  a little difficlut \n")),(0,o.kt)("p",null,"\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35 MacOS:  MiniKube + Docker \u2705\n\ud83d\udd35 Mac Install minikube  \u2705"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83d\udd36 Install Docker-desktop      \n\n    brew install docker --cask\n        (cask install app with GUI )\n\n\ud83d\udd36 Start Docker\n\n    open app in gui. \n\n\ud83d\udd36 Install Minikube \n\n    brew install minikube\n\n\ud83d\udd36 Start Minikube \n\n    minikube start / stop\n")),(0,o.kt)("p",null,"\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35 MacOS:  MiniKube + Podman \u2705"),(0,o.kt)("p",null,"\ud83d\udd35 podman / docker cli / docker desktop "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83d\udd36 Docker cli vs Docker Desktop \n\n    docker cli only work on linux \n        no windows and macos \n\n    if windows and macos need use docker cli \n        it need install a vm to win/mac first\n            then run docker cli in that vm.\n\n    so docker-desktop is a vm under screen.\n\n    so if possible install docker cli   not docker desktop.\n        docker cli use much less ram.\n\n        docker-desktop is still free. but have some limit.\n            it begian to charge.\n\n\n\n\ud83d\udd36 Podman vs Docker\n\n    new vision k8s stop support docker.\n    and use podman instead.\n        podman is opensource \n        docker begian charge money.\n\n    in simple  podman is better..\n")),(0,o.kt)("p",null,"\ud83d\udd35 Mac Install Podman & Minikube "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"brew install podman\nbrew install Minikube\n")),(0,o.kt)("p",null,"\ud83d\udd35 Podman Config "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83d\udd36 Create VM\n\n    podman machine init --cpus 4 --memory 8192 --disk-size 80\n    podman machine init --cpus 2 --memory 2048 --disk-size 20\n\n\n\ud83d\udd36 Start VM \n\n    podman machine start\n\n    after create a vm for podman.\n    now we can use podman like \n        iMAC ~ podman image list --all\n        REPOSITORY  TAG         IMAGE ID    CREATED     SIZE\n\n\n\ud83d\udd36 Give Podman Root permission \n\n    by default . podman permission is rootless.\n    if we need set rootful permission  need stop podman first.\n\n        iMAC ~ podman machine stop\n                Machine \"podman-machine-default\" stopped successfully\n        iMAC ~ podman machine set --rootful\n\n\n\ud83d\udd36 Start Podman again\n\n    podman machine start\n            \n        The system helper service is not installed; the default Docker API socket\n        address can't be used by podman. If you would like to install it run the\n        following commands:\n\n            sudo /usr/local/Cellar/podman/4.1.0/bin/podman-mac-helper install\n            podman machine stop; podman machine start\n\n        You can still connect Docker API clients by setting DOCKER_HOST using the\n        following command in your terminal session:\n\n            export DOCKER_HOST='unix:///Users/techark/.local/share/containers/podman/machine/podman-machine-default/podman.sock'\n\n        Machine \"podman-machine-default\" started successfully\n\n\n        \u203c\ufe0f there is warning during start . \n        \u203c\ufe0f Follow your own warning:  run two command:\n\n            sudo /usr/local/Cellar/podman/4.1.0/bin/podman-mac-helper install\n            export DOCKER_HOST='unix:///Users/techark/.local/share/containers/podman/machine/podman-machine-default/podman.sock'\n\n\n\ud83d\udd36 Restart Podman \n\n    podman machine stop\n    podman machine start\n        now no waring.\n\n\n\ud83d\udd36 Test Podman\n\n    podman run docker.io/hello-world\n\n    podman run docker.io/hello-world\n")),(0,o.kt)("p",null,"\ud83d\udd35 Minikube Start"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'\ud83d\udd36 Debug Mode \n\n    minikube start --alsologtostderr -v=7\n\n        if error. try:    minikube delete\n\n\n\ud83d\udd36 Start \n\n    minikube start\n    minikube start --driver=podman --container-runtime=cri-o\n    minikube start --cpus 4 --memory 7915 --disk-size=80G --driver=podman --network-plugin=cni --cni=auto\n\n\n        \ud83c\udf1f  Enabled addons: storage-provisioner, default-storageclass\n        \ud83d\udca1  kubectl not found. If you need it, try: \'minikube kubectl -- get pods -A\'\n        \ud83c\udfc4  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default\n\n\n\n\ud83d\udd36 Open dashboard\n\n    minikube dashboard \n')),(0,o.kt)("p",null,"\ud83d\udd35 Minikube kubectl Config "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'\u203c\ufe0f\u203c\ufe0f When use minikube kubectl. all command is little different \u203c\ufe0f\u203c\ufe0f\n\u203c\ufe0f\u203c\ufe0f When use minikube kubectl. all command is little different \u203c\ufe0f\u203c\ufe0f\n\u203c\ufe0f\u203c\ufe0f When use minikube kubectl. all command is little different \u203c\ufe0f\u203c\ufe0f\n\n    minikube kubectl -- create deployment nginxdepl --image=nginx\n        you need add -- after kubectl\n\n\n    or we setup alias. as follow.\n    so we can use kubectl as normal minikube.\n\n    https://minikube.sigs.k8s.io/docs/handbook/kubectl/\n\n\ud83d\udd36 1. Make alias \n\n    alias kubectl="minikube kubectl --"\n\n\ud83d\udd36 2. create a symbolic link\n\n    ln -s $(which minikube) /usr/local/bin/kubectl\n')),(0,o.kt)("p",null,"\ud83d\udd35 Minikube Config"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83d\udd36 Config CPU & Memory\n\n    minikube stop\n    minikube config set memory 7000\n    minikube config set cpus 4\n    minikube start\n")),(0,o.kt)("p",null,"\ud83d\udd35 Minikube Reset - option"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"minikube delete --all\n")),(0,o.kt)("p",null,"\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35\ud83d\udd35 Minikube \u2736 Demo \ud83d\udcaf"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\u203c\ufe0f Offical Manual \u203c\ufe0f\nhttps://minikube.sigs.k8s.io/docs/start/\n")),(0,o.kt)("p",null,"\ud83d\udd35 Start Minikube"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83d\udd36 Start Docker & Podman \n\n    if use docker-desktop. \n        have to run docker in gui first.\n    if use podman. \n        need start podman first\n\n\n\ud83d\udd36 Start Minikube\n\n    Minikube start\n\n\n\ud83d\udd36 Check Minikube Status\n\n    iMAC ~ minikube status\n    minikube\n    type: Control Plane\n    host: Running\n    kubelet: Running\n    apiserver: Running\n    kubeconfig: Configured\n    docker-env: in-use\n")),(0,o.kt)("p",null,"\ud83d\udd35 1. Create Deployment & export Port "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83d\udd36 Deploy Docker \n\n    kubectl create deployment dashy --image=lissy93/dashy\n\n        \u25ce Delete Depoly \n            kubectl delete deploy <deployment name>\n            kubectl delete deploy nginx\n\n\ud83d\udd36 Export  Server Port\n\n    kubectl expose deployment dashy --port=80 --type=NodePort\n            this is the port server use / not port you visit \n\n\n\ud83d\udd36 Check \n\n    \u25ce Check Deploy     kubectl get deployments\n    \u25ce Check Pods       kubectl get pods\n    \u25ce Check Service    kubectl get services \n")),(0,o.kt)("p",null,"\ud83d\udd35 Run Service  (enable Out Cluster Visit ])"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"minikube service dashy --url\nhttp://192.168.64.3:31147\n\n    \n    \u203c\ufe0f maybe open a web for you. that web is wrong! close it.  still need one step. \u203c\ufe0f\n        keep that terminal/ no close if close web will close too.\n        open a new termianl run below commond\n")),(0,o.kt)("p",null,"\ud83d\udd35 Forword Port To Local"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"kubectl port-forward service/NAME  LocalPort:ServerPort\n\nkubectl port-forward service/dashy 7000:80   \u2705\nkubectl port-forward service/dashy 88:80     \u274c\n    \u203c\ufe0f local port can not too small. local port under 100. need root permission\u203c\ufe0f\n\n\n\ud83d\udd36 Visit \n\n    http://localhost:7000\n")))}p.isMDXComponent=!0}}]);